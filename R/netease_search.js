(function () { var c5h = NEJ.P, bs6m = NEJ.F, G5L = c5h("nej.ut"), j5o = c5h("nej.u"), h5m = c5h("nej.v"), t5y = c5h("nej.j"), p5u = c5h("nm.d"), l5q = c5h("nm.x"), J6D = "Search-tracks_", b5g; p5u.fp7i({ "search-suggest": { url: "/api/search/suggest/web", type: "POST", format: function (Q6K) { return Q6K }, onerror: function (Q6K, e5j) { if (Q6K.code == 407) { e5j.onForbidden() } } }, "search-multimatch": { url: "/api/search/suggest/multimatch", type: "GET" }, "search-list": { url: "/api/cloudsearch/get/web", type: "post", noescape: true, filter: function (e5j, bf6Z) { window.log && window.log("searchkeywordclient", { type: this.crE3x(parseInt(e5j.data.type)) || "suggest", keyword: e5j.data.s, offset: e5j.offset, device_id: "null" }) }, format: function (Q6K, e5j) { if (Q6K.abroad) { try { Q6K.result = JSON.parse(decodeURIComponent(settmusic(Q6K.result, p5u.sk))) } catch (e) { } } Q6K.result = Q6K.result || {}; var k5p, cF6z, fI7B = [], jM9D = e5j.data.s || "", gs8k = e5j.data.limit, v5A = parseInt(e5j.data.type) || 1, m5r = Q6K.result; switch (v5A) { case 1: k5p = this.bSV9M(m5r.songs, e5j.data.hlpretag, e5j.data.hlposttag); cF6z = m5r.songCount; break; case 10: k5p = m5r.albums; cF6z = m5r.albumCount; break; case 100: k5p = m5r.artists; cF6z = m5r.artistCount; break; case 1e3: k5p = m5r.playlists; cF6z = m5r.playlistCount; break; case 1002: k5p = m5r.userprofiles; cF6z = m5r.userprofileCount; break; case 1004: k5p = m5r.mvs; cF6z = m5r.mvCount; break; case 1014: k5p = l5q.bTL9C(m5r.videos, l5q.bTI9z); cF6z = m5r.videoCount; break; case 1006: k5p = this.bSV9M(m5r.songs, e5j.data.hlpretag, e5j.data.hlposttag); cF6z = m5r.songCount; break; case 1009: var rt1x = m5r.djRadios; if (!!rt1x) { j5o.bg6a(rt1x, function (D5I, r5w, crC3x) { D5I.xid = D5I.id; D5I.id = D5I.id + "_rad" }); if (rt1x.length) { this.tz2x("radio_search-" + e5j.data.s, rt1x) } } cF6z = Math.min(m5r.djRadiosCount, 500); k5p = m5r.djprograms || []; if (e5j.data.isPub) { j5o.oE0x(rt1x, function (D5I, r5w, crC3x) { D5I.stype = 1; k5p.unshift(D5I) }); cF6z = Math.min(k5p.length, 500) } break }this.z5E("onsearchload", Q6K); if (k5p && k5p.length) { for (var i = 0; i < gs8k; i++) { if (i < k5p.length) { fI7B.push(k5p[i]) } else { fI7B.push(null) } } } return { more: !0, total: Math.min(cF6z || 0, jM9D.length < 3 ? 500 : 5e3), list: fI7B } }, onerror: function (Q6K, e5j) { e5j.onload(e5j, []); if (j5o.gW8O(e5j.onerror)) { e5j.onerror(Q6K) } } } }); p5u.Ig6a = NEJ.C(); b5g = p5u.Ig6a.N6H(p5u.hJ8B); b5g.cw6q = function () { this.cD6x() }; b5g.crA3x = function (J6D, e5j) { if (!J6D) return; if (!!this.bST9K) t5y.kJ9A(this.bST9K); this.bST9K = this.cj6d("search-suggest", NEJ.X({ data: { s: J6D, limit: 8 } }, e5j)) }; b5g.cMA7t = function (J6D, e5j) { if (!J6D) return; this.cj6d("search-multimatch", NEJ.X({ data: { s: J6D } }, e5j)) }; b5g.bSV9M = function () { var crw3x = function (hU8M, bSR9I, bSQ9H) { var crl3x = hU8M.match(new RegExp(bSR9I + "(.+?)" + bSQ9H, "gi")), cs6m = 0; j5o.bg6a(crl3x, function (q5v) { cs6m += q5v.replace(new RegExp(bSR9I, "g"), "").replace(new RegExp(bSQ9H, "g"), "").length }); return cs6m }; return function (jx8p, cri3x, crf3x) { var bSM9D = []; j5o.bg6a(jx8p, function (bi6c, X6R) { bi6c = l5q.ys3x(bi6c); var bhN3x = bi6c.lyrics || [], dC7v = bhN3x.length, kx9o = 0, cF6z = 4, bhI3x = { l: 0, v: 0 }, bqa4e; if (dC7v > 4) { j5o.bg6a(bhN3x, function (hU8M, r5w) { var bSL9C = crw3x(hU8M, cri3x, crf3x); if (bSL9C > bhI3x.v) { bhI3x.v = bSL9C; bhI3x.l = r5w } }); kx9o = bhI3x.l; kx9o = Math.max(kx9o, 0); bqa4e = dC7v - kx9o - 4; if (bqa4e < 0) kx9o += bqa4e; bi6c.lrcAbstractEnd = kx9o + cF6z - 1 } else { bi6c.lrcAbstractEnd = dC7v - 1 } bi6c.lrcAbstractStart = kx9o; bi6c.indexId = (bhN3x && bhN3x.length ? "L" : "NL") + bi6c.id; bSM9D.push(bi6c) }); return bSM9D } }(); b5g.crE3x = function (v5A) { switch (v5A) { case 1: return "song"; break; case 100: return "artist"; break; case 10: return "album"; break; case 1004: return "mv"; break; case 1014: return "video"; break; case 1006: return "lyric"; break; case 1e3: return "list"; break; case 1009: return "djradio"; break; case 1002: return "user"; break; default: return "suggest"; break } } })();